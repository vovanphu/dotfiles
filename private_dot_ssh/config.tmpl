# .ssh/config - Managed by Chezmoi & Bitwarden
# This file is generated. Do not edit manually.

# Include local/unmanaged configurations (created manually by user)
# We use a wildcard (*) so that if the file doesn't exist, SSH ignores it silently instead of erroring.
Include config.local*

# Common Configuration
Host *
    AddKeysToAgent yes
    Compression yes

# GitHub (IdentityFile handled by Agent usually, but here for reference)
Host github.com
    User git
    Hostname github.com

# Role-Based Keys
{{- if or (eq .role "centaur") (eq .role "chimera") }}
# Master Identity (Centaur & Chimera)
IdentityFile ~/.ssh/id_ed25519_dotfiles_master
{{- end }}

{{- if or (eq .role "hydra") (eq .role "griffin") (eq .role "cyclops") (eq .role "kraken") (eq .role "cerberus") (eq .role "golem") (eq .role "minion") (eq .role "siren") }}
# Deploy Identity (Server Fleet)
IdentityFile ~/.ssh/id_ed25519_dotfiles_server
{{- end }}

# Server (Gateway) typically relies on Agent Forwarding or separate deploy keys
# So no default IdentityFile enforced here unless specific needs arise.

# Secure Hosts (Pulled from Bitwarden)
{{- /* Use a safe approach: only try to fetch if we have a session or specific logic */ -}}
{{- /* Optional: Enable this if you have 'ssh-config-common' in Bitwarden
{{- if (env "BW_SESSION") -}}
{{-   $sshConfig := (bitwarden "item" "ssh-config-common") -}}
{{-   if $sshConfig -}}
# Extracted from Bitwarden: ssh-config-common
{{ $sshConfig.notes }}
{{-   end -}}
{{- end -}}
*/ -}}
